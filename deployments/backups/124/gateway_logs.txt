Caused by: java.net.ConnectException: finishConnect(..) failed: Connection refused
	at io.netty.channel.unix.Errors.newConnectException0(Errors.java:166) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.unix.Errors.handleConnectErrno(Errors.java:131) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.unix.Socket.finishConnect(Socket.java:359) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.doFinishConnect(AbstractEpollChannel.java:710) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.finishConnect(AbstractEpollChannel.java:687) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.epollOutReady(AbstractEpollChannel.java:567) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:489) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:397) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]

2026-01-07T11:41:17.119Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: product-service
2026-01-07T11:41:17.119Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/products] to Route{id='product-service', uri=http://product-service:8080, order=0, predicate=Paths: [/api/products/**], match trailing slash: true, gatewayFilters=[[com.letsplay.gateway.filter.JwtAuthenticationFilter$$Lambda$964/0x00007b107b5527c0@6df86756, order = 1]], metadata={}}
2026-01-07T11:41:17.119Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [ba560f68-20] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@39fc9dae
2026-01-07T11:41:17.120Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@464649c}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@545de5a4}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1255b1d1}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@60bdf15d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@51e4ccb3}, order = 0], [com.letsplay.gateway.filter.JwtAuthenticationFilter$$Lambda$964/0x00007b107b5527c0@6df86756, order = 1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7c22d4f}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@46e8a539}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@47da3952}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@60b71e8f}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@5f59185e}, order = 2147483647]]
2026-01-07T11:41:17.128Z DEBUG 1 --- [or-http-epoll-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8080", Content-Length:"61", sec-ch-ua-platform:""Windows"", Authorization:"Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoic2VsbGVyIiwidXNlcklkIjoiNjk1ZTQ1YTU5MGE5M2Y3NTMyM2QxNjExIiwiZW1haWwiOiJ0ZXN0MUBnbWFpbC5jb20iLCJzdWIiOiI2OTVlNDVhNTkwYTkzZjc1MzIzZDE2MTEiLCJpYXQiOjE3Njc3ODYwMTUsImV4cCI6MTc2Nzg3MjQxNX0.BEs5yGENP6lBNcFGQ-LgCP-SQykO9bc-fmoVrBidaAwNrzmUFlfv8NnYp4UkiCNHvZZZHPcBs0ZVIkIY0NP3QQ", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", Accept:"application/json, text/plain, */*", sec-ch-ua:""Brave";v="143", "Chromium";v="143", "Not A(Brand";v="24"", Content-Type:"application/json", sec-ch-ua-mobile:"?0", Sec-GPC:"1", Accept-Language:"fr-FR,fr;q=0.9", Origin:"http://localhost:4200", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:4200/", Accept-Encoding:"gzip, deflate, br, zstd", X-User-Id:"695e45a590a93f75323d1611", X-User-Role:"seller", Forwarded:"proto=http;host="localhost:8080";for="172.19.0.1:38280"", X-Forwarded-For:"172.19.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2026-01-07T11:41:17.129Z DEBUG 1 --- [or-http-epoll-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='product-service', spring.cloud.gateway.route.uri='http://product-service:8080'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/products'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@b4202d0', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.13358E-4, duration(nanos)=113358.0, startTimeNanos=6456702952627}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/products'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6cc0e070', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.010925747, duration(nanos)=1.0925747E7, startTimeNanos=6456692224104}'], parentObservation=null}} created for the request. New headers are [Host:"localhost:8080", Content-Length:"61", sec-ch-ua-platform:""Windows"", Authorization:"Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoic2VsbGVyIiwidXNlcklkIjoiNjk1ZTQ1YTU5MGE5M2Y3NTMyM2QxNjExIiwiZW1haWwiOiJ0ZXN0MUBnbWFpbC5jb20iLCJzdWIiOiI2OTVlNDVhNTkwYTkzZjc1MzIzZDE2MTEiLCJpYXQiOjE3Njc3ODYwMTUsImV4cCI6MTc2Nzg3MjQxNX0.BEs5yGENP6lBNcFGQ-LgCP-SQykO9bc-fmoVrBidaAwNrzmUFlfv8NnYp4UkiCNHvZZZHPcBs0ZVIkIY0NP3QQ", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", Accept:"application/json, text/plain, */*", sec-ch-ua:""Brave";v="143", "Chromium";v="143", "Not A(Brand";v="24"", Content-Type:"application/json", sec-ch-ua-mobile:"?0", Sec-GPC:"1", Accept-Language:"fr-FR,fr;q=0.9", Origin:"http://localhost:4200", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:4200/", Accept-Encoding:"gzip, deflate, br, zstd", X-User-Id:"695e45a590a93f75323d1611", X-User-Role:"seller", Forwarded:"proto=http;host="localhost:8080";for="172.19.0.1:38280"", X-Forwarded-For:"172.19.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2026-01-07T11:41:17.131Z DEBUG 1 --- [or-http-epoll-4] .o.ObservationClosingWebExceptionHandler : An exception occurred and observation was not previously stopped, will stop it. The exception was [io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: product-service/172.19.0.5:8080]
2026-01-07T11:41:17.131Z ERROR 1 --- [or-http-epoll-4] a.w.r.e.AbstractErrorWebExceptionHandler : [ba560f68-20]  500 Server Error for HTTP POST "/api/products"

io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: product-service/172.19.0.5:8080
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ org.springframework.web.cors.reactive.CorsWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ org.springframework.web.filter.reactive.ServerHttpObservationFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ HTTP POST "/api/products" [ExceptionHandlingWebHandler]
Original Stack Trace:
Caused by: java.net.ConnectException: finishConnect(..) failed: Connection refused
	at io.netty.channel.unix.Errors.newConnectException0(Errors.java:166) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.unix.Errors.handleConnectErrno(Errors.java:131) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.unix.Socket.finishConnect(Socket.java:359) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.doFinishConnect(AbstractEpollChannel.java:710) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.finishConnect(AbstractEpollChannel.java:687) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.epollOutReady(AbstractEpollChannel.java:567) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:489) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:397) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]

2026-01-07T11:41:17.841Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: product-service
2026-01-07T11:41:17.852Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/products] to Route{id='product-service', uri=http://product-service:8080, order=0, predicate=Paths: [/api/products/**], match trailing slash: true, gatewayFilters=[[com.letsplay.gateway.filter.JwtAuthenticationFilter$$Lambda$964/0x00007b107b5527c0@6df86756, order = 1]], metadata={}}
2026-01-07T11:41:17.852Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [ba560f68-21] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@39fc9dae
2026-01-07T11:41:17.853Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@464649c}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@545de5a4}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1255b1d1}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@60bdf15d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@51e4ccb3}, order = 0], [com.letsplay.gateway.filter.JwtAuthenticationFilter$$Lambda$964/0x00007b107b5527c0@6df86756, order = 1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7c22d4f}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@46e8a539}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@47da3952}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@60b71e8f}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@5f59185e}, order = 2147483647]]
2026-01-07T11:41:17.862Z DEBUG 1 --- [or-http-epoll-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8080", Content-Length:"61", sec-ch-ua-platform:""Windows"", Authorization:"Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoic2VsbGVyIiwidXNlcklkIjoiNjk1ZTQ1YTU5MGE5M2Y3NTMyM2QxNjExIiwiZW1haWwiOiJ0ZXN0MUBnbWFpbC5jb20iLCJzdWIiOiI2OTVlNDVhNTkwYTkzZjc1MzIzZDE2MTEiLCJpYXQiOjE3Njc3ODYwMTUsImV4cCI6MTc2Nzg3MjQxNX0.BEs5yGENP6lBNcFGQ-LgCP-SQykO9bc-fmoVrBidaAwNrzmUFlfv8NnYp4UkiCNHvZZZHPcBs0ZVIkIY0NP3QQ", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", Accept:"application/json, text/plain, */*", sec-ch-ua:""Brave";v="143", "Chromium";v="143", "Not A(Brand";v="24"", Content-Type:"application/json", sec-ch-ua-mobile:"?0", Sec-GPC:"1", Accept-Language:"fr-FR,fr;q=0.9", Origin:"http://localhost:4200", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:4200/", Accept-Encoding:"gzip, deflate, br, zstd", X-User-Id:"695e45a590a93f75323d1611", X-User-Role:"seller", Forwarded:"proto=http;host="localhost:8080";for="172.19.0.1:38280"", X-Forwarded-For:"172.19.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2026-01-07T11:41:17.864Z DEBUG 1 --- [or-http-epoll-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='product-service', spring.cloud.gateway.route.uri='http://product-service:8080'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/products'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3701f3fb', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.07328E-4, duration(nanos)=107328.0, startTimeNanos=6457437196364}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/products'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@53608c2f', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.023075286, duration(nanos)=2.3075286E7, startTimeNanos=6457414700698}'], parentObservation=null}} created for the request. New headers are [Host:"localhost:8080", Content-Length:"61", sec-ch-ua-platform:""Windows"", Authorization:"Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoic2VsbGVyIiwidXNlcklkIjoiNjk1ZTQ1YTU5MGE5M2Y3NTMyM2QxNjExIiwiZW1haWwiOiJ0ZXN0MUBnbWFpbC5jb20iLCJzdWIiOiI2OTVlNDVhNTkwYTkzZjc1MzIzZDE2MTEiLCJpYXQiOjE3Njc3ODYwMTUsImV4cCI6MTc2Nzg3MjQxNX0.BEs5yGENP6lBNcFGQ-LgCP-SQykO9bc-fmoVrBidaAwNrzmUFlfv8NnYp4UkiCNHvZZZHPcBs0ZVIkIY0NP3QQ", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", Accept:"application/json, text/plain, */*", sec-ch-ua:""Brave";v="143", "Chromium";v="143", "Not A(Brand";v="24"", Content-Type:"application/json", sec-ch-ua-mobile:"?0", Sec-GPC:"1", Accept-Language:"fr-FR,fr;q=0.9", Origin:"http://localhost:4200", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:4200/", Accept-Encoding:"gzip, deflate, br, zstd", X-User-Id:"695e45a590a93f75323d1611", X-User-Role:"seller", Forwarded:"proto=http;host="localhost:8080";for="172.19.0.1:38280"", X-Forwarded-For:"172.19.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2026-01-07T11:41:17.866Z DEBUG 1 --- [or-http-epoll-4] .o.ObservationClosingWebExceptionHandler : An exception occurred and observation was not previously stopped, will stop it. The exception was [io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: product-service/172.19.0.5:8080]
2026-01-07T11:41:17.867Z ERROR 1 --- [or-http-epoll-4] a.w.r.e.AbstractErrorWebExceptionHandler : [ba560f68-21]  500 Server Error for HTTP POST "/api/products"

io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: product-service/172.19.0.5:8080
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ org.springframework.web.cors.reactive.CorsWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ org.springframework.web.filter.reactive.ServerHttpObservationFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ HTTP POST "/api/products" [ExceptionHandlingWebHandler]
Original Stack Trace:
Caused by: java.net.ConnectException: finishConnect(..) failed: Connection refused
	at io.netty.channel.unix.Errors.newConnectException0(Errors.java:166) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.unix.Errors.handleConnectErrno(Errors.java:131) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.unix.Socket.finishConnect(Socket.java:359) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.doFinishConnect(AbstractEpollChannel.java:710) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.finishConnect(AbstractEpollChannel.java:687) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.epollOutReady(AbstractEpollChannel.java:567) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:489) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:397) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]

2026-01-07T11:42:56.173Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: product-service
2026-01-07T11:42:56.174Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/products] to Route{id='product-service', uri=http://product-service:8080, order=0, predicate=Paths: [/api/products/**], match trailing slash: true, gatewayFilters=[[com.letsplay.gateway.filter.JwtAuthenticationFilter$$Lambda$964/0x00007b107b5527c0@6df86756, order = 1]], metadata={}}
2026-01-07T11:42:56.174Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [ba560f68-22] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@39fc9dae
2026-01-07T11:42:56.174Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@464649c}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@545de5a4}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1255b1d1}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@60bdf15d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@51e4ccb3}, order = 0], [com.letsplay.gateway.filter.JwtAuthenticationFilter$$Lambda$964/0x00007b107b5527c0@6df86756, order = 1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7c22d4f}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@46e8a539}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@47da3952}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@60b71e8f}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@5f59185e}, order = 2147483647]]
2026-01-07T11:42:56.180Z DEBUG 1 --- [or-http-epoll-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8080", Content-Length:"61", sec-ch-ua-platform:""Windows"", Authorization:"Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoic2VsbGVyIiwidXNlcklkIjoiNjk1ZTQ1YTU5MGE5M2Y3NTMyM2QxNjExIiwiZW1haWwiOiJ0ZXN0MUBnbWFpbC5jb20iLCJzdWIiOiI2OTVlNDVhNTkwYTkzZjc1MzIzZDE2MTEiLCJpYXQiOjE3Njc3ODYwMTUsImV4cCI6MTc2Nzg3MjQxNX0.BEs5yGENP6lBNcFGQ-LgCP-SQykO9bc-fmoVrBidaAwNrzmUFlfv8NnYp4UkiCNHvZZZHPcBs0ZVIkIY0NP3QQ", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", Accept:"application/json, text/plain, */*", sec-ch-ua:""Brave";v="143", "Chromium";v="143", "Not A(Brand";v="24"", Content-Type:"application/json", sec-ch-ua-mobile:"?0", Sec-GPC:"1", Accept-Language:"fr-FR,fr;q=0.9", Origin:"http://localhost:4200", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:4200/", Accept-Encoding:"gzip, deflate, br, zstd", X-User-Id:"695e45a590a93f75323d1611", X-User-Role:"seller", Forwarded:"proto=http;host="localhost:8080";for="172.19.0.1:38280"", X-Forwarded-For:"172.19.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2026-01-07T11:42:56.181Z DEBUG 1 --- [or-http-epoll-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='product-service', spring.cloud.gateway.route.uri='http://product-service:8080'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/products'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2bc40ded', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.31503E-4, duration(nanos)=131503.0, startTimeNanos=6555760469117}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/products'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4f5c59a5', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.008710033, duration(nanos)=8710033.0, startTimeNanos=6555752131794}'], parentObservation=null}} created for the request. New headers are [Host:"localhost:8080", Content-Length:"61", sec-ch-ua-platform:""Windows"", Authorization:"Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoic2VsbGVyIiwidXNlcklkIjoiNjk1ZTQ1YTU5MGE5M2Y3NTMyM2QxNjExIiwiZW1haWwiOiJ0ZXN0MUBnbWFpbC5jb20iLCJzdWIiOiI2OTVlNDVhNTkwYTkzZjc1MzIzZDE2MTEiLCJpYXQiOjE3Njc3ODYwMTUsImV4cCI6MTc2Nzg3MjQxNX0.BEs5yGENP6lBNcFGQ-LgCP-SQykO9bc-fmoVrBidaAwNrzmUFlfv8NnYp4UkiCNHvZZZHPcBs0ZVIkIY0NP3QQ", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", Accept:"application/json, text/plain, */*", sec-ch-ua:""Brave";v="143", "Chromium";v="143", "Not A(Brand";v="24"", Content-Type:"application/json", sec-ch-ua-mobile:"?0", Sec-GPC:"1", Accept-Language:"fr-FR,fr;q=0.9", Origin:"http://localhost:4200", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:4200/", Accept-Encoding:"gzip, deflate, br, zstd", X-User-Id:"695e45a590a93f75323d1611", X-User-Role:"seller", Forwarded:"proto=http;host="localhost:8080";for="172.19.0.1:38280"", X-Forwarded-For:"172.19.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2026-01-07T11:42:56.184Z DEBUG 1 --- [or-http-epoll-4] .o.ObservationClosingWebExceptionHandler : An exception occurred and observation was not previously stopped, will stop it. The exception was [io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: product-service/172.19.0.5:8080]
2026-01-07T11:42:56.184Z ERROR 1 --- [or-http-epoll-4] a.w.r.e.AbstractErrorWebExceptionHandler : [ba560f68-22]  500 Server Error for HTTP POST "/api/products"

io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: product-service/172.19.0.5:8080
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ org.springframework.web.cors.reactive.CorsWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ org.springframework.web.filter.reactive.ServerHttpObservationFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ HTTP POST "/api/products" [ExceptionHandlingWebHandler]
Original Stack Trace:
Caused by: java.net.ConnectException: finishConnect(..) failed: Connection refused
	at io.netty.channel.unix.Errors.newConnectException0(Errors.java:166) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.unix.Errors.handleConnectErrno(Errors.java:131) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.unix.Socket.finishConnect(Socket.java:359) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.doFinishConnect(AbstractEpollChannel.java:710) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.finishConnect(AbstractEpollChannel.java:687) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.epollOutReady(AbstractEpollChannel.java:567) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:489) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:397) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]

2026-01-07T11:42:56.634Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: product-service
2026-01-07T11:42:56.634Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/products] to Route{id='product-service', uri=http://product-service:8080, order=0, predicate=Paths: [/api/products/**], match trailing slash: true, gatewayFilters=[[com.letsplay.gateway.filter.JwtAuthenticationFilter$$Lambda$964/0x00007b107b5527c0@6df86756, order = 1]], metadata={}}
2026-01-07T11:42:56.635Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [ba560f68-23] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@39fc9dae
2026-01-07T11:42:56.635Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@464649c}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@545de5a4}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1255b1d1}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@60bdf15d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@51e4ccb3}, order = 0], [com.letsplay.gateway.filter.JwtAuthenticationFilter$$Lambda$964/0x00007b107b5527c0@6df86756, order = 1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7c22d4f}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@46e8a539}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@47da3952}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@60b71e8f}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@5f59185e}, order = 2147483647]]
2026-01-07T11:42:56.639Z DEBUG 1 --- [or-http-epoll-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8080", Content-Length:"61", sec-ch-ua-platform:""Windows"", Authorization:"Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoic2VsbGVyIiwidXNlcklkIjoiNjk1ZTQ1YTU5MGE5M2Y3NTMyM2QxNjExIiwiZW1haWwiOiJ0ZXN0MUBnbWFpbC5jb20iLCJzdWIiOiI2OTVlNDVhNTkwYTkzZjc1MzIzZDE2MTEiLCJpYXQiOjE3Njc3ODYwMTUsImV4cCI6MTc2Nzg3MjQxNX0.BEs5yGENP6lBNcFGQ-LgCP-SQykO9bc-fmoVrBidaAwNrzmUFlfv8NnYp4UkiCNHvZZZHPcBs0ZVIkIY0NP3QQ", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", Accept:"application/json, text/plain, */*", sec-ch-ua:""Brave";v="143", "Chromium";v="143", "Not A(Brand";v="24"", Content-Type:"application/json", sec-ch-ua-mobile:"?0", Sec-GPC:"1", Accept-Language:"fr-FR,fr;q=0.9", Origin:"http://localhost:4200", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:4200/", Accept-Encoding:"gzip, deflate, br, zstd", X-User-Id:"695e45a590a93f75323d1611", X-User-Role:"seller", Forwarded:"proto=http;host="localhost:8080";for="172.19.0.1:38280"", X-Forwarded-For:"172.19.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2026-01-07T11:42:56.640Z DEBUG 1 --- [or-http-epoll-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='product-service', spring.cloud.gateway.route.uri='http://product-service:8080'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/products'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4a2b5668', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.045E-4, duration(nanos)=104500.0, startTimeNanos=6556219689035}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/products'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@473a201b', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.006237276, duration(nanos)=6237276.0, startTimeNanos=6556213634646}'], parentObservation=null}} created for the request. New headers are [Host:"localhost:8080", Content-Length:"61", sec-ch-ua-platform:""Windows"", Authorization:"Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoic2VsbGVyIiwidXNlcklkIjoiNjk1ZTQ1YTU5MGE5M2Y3NTMyM2QxNjExIiwiZW1haWwiOiJ0ZXN0MUBnbWFpbC5jb20iLCJzdWIiOiI2OTVlNDVhNTkwYTkzZjc1MzIzZDE2MTEiLCJpYXQiOjE3Njc3ODYwMTUsImV4cCI6MTc2Nzg3MjQxNX0.BEs5yGENP6lBNcFGQ-LgCP-SQykO9bc-fmoVrBidaAwNrzmUFlfv8NnYp4UkiCNHvZZZHPcBs0ZVIkIY0NP3QQ", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", Accept:"application/json, text/plain, */*", sec-ch-ua:""Brave";v="143", "Chromium";v="143", "Not A(Brand";v="24"", Content-Type:"application/json", sec-ch-ua-mobile:"?0", Sec-GPC:"1", Accept-Language:"fr-FR,fr;q=0.9", Origin:"http://localhost:4200", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:4200/", Accept-Encoding:"gzip, deflate, br, zstd", X-User-Id:"695e45a590a93f75323d1611", X-User-Role:"seller", Forwarded:"proto=http;host="localhost:8080";for="172.19.0.1:38280"", X-Forwarded-For:"172.19.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2026-01-07T11:42:56.641Z DEBUG 1 --- [or-http-epoll-4] .o.ObservationClosingWebExceptionHandler : An exception occurred and observation was not previously stopped, will stop it. The exception was [io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: product-service/172.19.0.5:8080]
2026-01-07T11:42:56.642Z ERROR 1 --- [or-http-epoll-4] a.w.r.e.AbstractErrorWebExceptionHandler : [ba560f68-23]  500 Server Error for HTTP POST "/api/products"

io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: product-service/172.19.0.5:8080
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ org.springframework.web.cors.reactive.CorsWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ org.springframework.web.filter.reactive.ServerHttpObservationFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ HTTP POST "/api/products" [ExceptionHandlingWebHandler]
Original Stack Trace:
Caused by: java.net.ConnectException: finishConnect(..) failed: Connection refused
	at io.netty.channel.unix.Errors.newConnectException0(Errors.java:166) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.unix.Errors.handleConnectErrno(Errors.java:131) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.unix.Socket.finishConnect(Socket.java:359) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.doFinishConnect(AbstractEpollChannel.java:710) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.finishConnect(AbstractEpollChannel.java:687) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.epollOutReady(AbstractEpollChannel.java:567) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:489) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:397) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]

2026-01-07T11:43:02.046Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: product-service
2026-01-07T11:43:02.046Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/products] to Route{id='product-service', uri=http://product-service:8080, order=0, predicate=Paths: [/api/products/**], match trailing slash: true, gatewayFilters=[[com.letsplay.gateway.filter.JwtAuthenticationFilter$$Lambda$964/0x00007b107b5527c0@6df86756, order = 1]], metadata={}}
2026-01-07T11:43:02.046Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [ba560f68-24] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@39fc9dae
2026-01-07T11:43:02.046Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@464649c}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@545de5a4}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1255b1d1}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@60bdf15d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@51e4ccb3}, order = 0], [com.letsplay.gateway.filter.JwtAuthenticationFilter$$Lambda$964/0x00007b107b5527c0@6df86756, order = 1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7c22d4f}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@46e8a539}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@47da3952}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@60b71e8f}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@5f59185e}, order = 2147483647]]
2026-01-07T11:43:02.051Z DEBUG 1 --- [or-http-epoll-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8080", Content-Length:"61", sec-ch-ua-platform:""Windows"", Authorization:"Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoic2VsbGVyIiwidXNlcklkIjoiNjk1ZTQ1YTU5MGE5M2Y3NTMyM2QxNjExIiwiZW1haWwiOiJ0ZXN0MUBnbWFpbC5jb20iLCJzdWIiOiI2OTVlNDVhNTkwYTkzZjc1MzIzZDE2MTEiLCJpYXQiOjE3Njc3ODYwMTUsImV4cCI6MTc2Nzg3MjQxNX0.BEs5yGENP6lBNcFGQ-LgCP-SQykO9bc-fmoVrBidaAwNrzmUFlfv8NnYp4UkiCNHvZZZHPcBs0ZVIkIY0NP3QQ", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", Accept:"application/json, text/plain, */*", sec-ch-ua:""Brave";v="143", "Chromium";v="143", "Not A(Brand";v="24"", Content-Type:"application/json", sec-ch-ua-mobile:"?0", Sec-GPC:"1", Accept-Language:"fr-FR,fr;q=0.9", Origin:"http://localhost:4200", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:4200/", Accept-Encoding:"gzip, deflate, br, zstd", X-User-Id:"695e45a590a93f75323d1611", X-User-Role:"seller", Forwarded:"proto=http;host="localhost:8080";for="172.19.0.1:38280"", X-Forwarded-For:"172.19.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2026-01-07T11:43:02.051Z DEBUG 1 --- [or-http-epoll-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='product-service', spring.cloud.gateway.route.uri='http://product-service:8080'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/products'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@a613980', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=7.4765E-5, duration(nanos)=74765.0, startTimeNanos=6561630968816}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/products'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@64792a43', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.005786168, duration(nanos)=5786168.0, startTimeNanos=6561625317898}'], parentObservation=null}} created for the request. New headers are [Host:"localhost:8080", Content-Length:"61", sec-ch-ua-platform:""Windows"", Authorization:"Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoic2VsbGVyIiwidXNlcklkIjoiNjk1ZTQ1YTU5MGE5M2Y3NTMyM2QxNjExIiwiZW1haWwiOiJ0ZXN0MUBnbWFpbC5jb20iLCJzdWIiOiI2OTVlNDVhNTkwYTkzZjc1MzIzZDE2MTEiLCJpYXQiOjE3Njc3ODYwMTUsImV4cCI6MTc2Nzg3MjQxNX0.BEs5yGENP6lBNcFGQ-LgCP-SQykO9bc-fmoVrBidaAwNrzmUFlfv8NnYp4UkiCNHvZZZHPcBs0ZVIkIY0NP3QQ", User-Agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", Accept:"application/json, text/plain, */*", sec-ch-ua:""Brave";v="143", "Chromium";v="143", "Not A(Brand";v="24"", Content-Type:"application/json", sec-ch-ua-mobile:"?0", Sec-GPC:"1", Accept-Language:"fr-FR,fr;q=0.9", Origin:"http://localhost:4200", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:4200/", Accept-Encoding:"gzip, deflate, br, zstd", X-User-Id:"695e45a590a93f75323d1611", X-User-Role:"seller", Forwarded:"proto=http;host="localhost:8080";for="172.19.0.1:38280"", X-Forwarded-For:"172.19.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2026-01-07T11:43:02.053Z DEBUG 1 --- [or-http-epoll-4] .o.ObservationClosingWebExceptionHandler : An exception occurred and observation was not previously stopped, will stop it. The exception was [io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: product-service/172.19.0.5:8080]
2026-01-07T11:43:02.053Z ERROR 1 --- [or-http-epoll-4] a.w.r.e.AbstractErrorWebExceptionHandler : [ba560f68-24]  500 Server Error for HTTP POST "/api/products"

io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: product-service/172.19.0.5:8080
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ org.springframework.web.cors.reactive.CorsWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ org.springframework.web.filter.reactive.ServerHttpObservationFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ HTTP POST "/api/products" [ExceptionHandlingWebHandler]
Original Stack Trace:
Caused by: java.net.ConnectException: finishConnect(..) failed: Connection refused
	at io.netty.channel.unix.Errors.newConnectException0(Errors.java:166) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.unix.Errors.handleConnectErrno(Errors.java:131) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.unix.Socket.finishConnect(Socket.java:359) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.doFinishConnect(AbstractEpollChannel.java:710) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.finishConnect(AbstractEpollChannel.java:687) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.epollOutReady(AbstractEpollChannel.java:567) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:489) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:397) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]

2026-01-07T11:43:21.059Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: product-service
2026-01-07T11:43:21.059Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/products] to Route{id='product-service', uri=http://product-service:8080, order=0, predicate=Paths: [/api/products/**], match trailing slash: true, gatewayFilters=[[com.letsplay.gateway.filter.JwtAuthenticationFilter$$Lambda$964/0x00007b107b5527c0@6df86756, order = 1]], metadata={}}
2026-01-07T11:43:21.059Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [ba560f68-25] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@39fc9dae
2026-01-07T11:43:21.059Z DEBUG 1 --- [or-http-epoll-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@464649c}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@545de5a4}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1255b1d1}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@60bdf15d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@51e4ccb3}, order = 0], [com.letsplay.gateway.filter.JwtAuthenticationFilter$$Lambda$964/0x00007b107b5527c0@6df86756, order = 1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@7c22d4f}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@46e8a539}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@47da3952}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@60b71e8f}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@5f59185e}, order = 2147483647]]
2026-01-07T11:43:21.064Z DEBUG 1 --- [or-http-epoll-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Host:"localhost:8080", Content-Length:"61", Authorization:"Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoic2VsbGVyIiwidXNlcklkIjoiNjk1ZTQ1YTU5MGE5M2Y3NTMyM2QxNjExIiwiZW1haWwiOiJ0ZXN0MUBnbWFpbC5jb20iLCJzdWIiOiI2OTVlNDVhNTkwYTkzZjc1MzIzZDE2MTEiLCJpYXQiOjE3Njc3ODYwMTUsImV4cCI6MTc2Nzg3MjQxNX0.BEs5yGENP6lBNcFGQ-LgCP-SQykO9bc-fmoVrBidaAwNrzmUFlfv8NnYp4UkiCNHvZZZHPcBs0ZVIkIY0NP3QQ", User-Agent:"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1", Accept:"application/json, text/plain, */*", Content-Type:"application/json", Sec-GPC:"1", Accept-Language:"fr-FR,fr;q=0.9", Origin:"http://localhost:4200", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:4200/", Accept-Encoding:"gzip, deflate, br, zstd", X-User-Id:"695e45a590a93f75323d1611", X-User-Role:"seller", Forwarded:"proto=http;host="localhost:8080";for="172.19.0.1:38280"", X-Forwarded-For:"172.19.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2026-01-07T11:43:21.064Z DEBUG 1 --- [or-http-epoll-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='product-service', spring.cloud.gateway.route.uri='http://product-service:8080'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/products'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@73d99ffc', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=4.9943E-5, duration(nanos)=49943.0, startTimeNanos=6580644891590}'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/products'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@39690cd', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.005611005, duration(nanos)=5611005.0, startTimeNanos=6580639376971}'], parentObservation=null}} created for the request. New headers are [Host:"localhost:8080", Content-Length:"61", Authorization:"Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoic2VsbGVyIiwidXNlcklkIjoiNjk1ZTQ1YTU5MGE5M2Y3NTMyM2QxNjExIiwiZW1haWwiOiJ0ZXN0MUBnbWFpbC5jb20iLCJzdWIiOiI2OTVlNDVhNTkwYTkzZjc1MzIzZDE2MTEiLCJpYXQiOjE3Njc3ODYwMTUsImV4cCI6MTc2Nzg3MjQxNX0.BEs5yGENP6lBNcFGQ-LgCP-SQykO9bc-fmoVrBidaAwNrzmUFlfv8NnYp4UkiCNHvZZZHPcBs0ZVIkIY0NP3QQ", User-Agent:"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1", Accept:"application/json, text/plain, */*", Content-Type:"application/json", Sec-GPC:"1", Accept-Language:"fr-FR,fr;q=0.9", Origin:"http://localhost:4200", Sec-Fetch-Site:"same-site", Sec-Fetch-Mode:"cors", Sec-Fetch-Dest:"empty", Referer:"http://localhost:4200/", Accept-Encoding:"gzip, deflate, br, zstd", X-User-Id:"695e45a590a93f75323d1611", X-User-Role:"seller", Forwarded:"proto=http;host="localhost:8080";for="172.19.0.1:38280"", X-Forwarded-For:"172.19.0.1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2026-01-07T11:43:21.065Z DEBUG 1 --- [or-http-epoll-4] .o.ObservationClosingWebExceptionHandler : An exception occurred and observation was not previously stopped, will stop it. The exception was [io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: product-service/172.19.0.5:8080]
2026-01-07T11:43:21.066Z ERROR 1 --- [or-http-epoll-4] a.w.r.e.AbstractErrorWebExceptionHandler : [ba560f68-25]  500 Server Error for HTTP POST "/api/products"

io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: product-service/172.19.0.5:8080
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ org.springframework.web.cors.reactive.CorsWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ org.springframework.web.filter.reactive.ServerHttpObservationFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ HTTP POST "/api/products" [ExceptionHandlingWebHandler]
Original Stack Trace:
Caused by: java.net.ConnectException: finishConnect(..) failed: Connection refused
	at io.netty.channel.unix.Errors.newConnectException0(Errors.java:166) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.unix.Errors.handleConnectErrno(Errors.java:131) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.unix.Socket.finishConnect(Socket.java:359) ~[netty-transport-native-unix-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.doFinishConnect(AbstractEpollChannel.java:710) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.finishConnect(AbstractEpollChannel.java:687) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.epollOutReady(AbstractEpollChannel.java:567) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:489) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:397) ~[netty-transport-classes-epoll-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar!/:4.1.92.Final]
	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]

